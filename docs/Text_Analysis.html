<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.217">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ADF&amp;G Division of Sport Fisheries gothamCulture Survey Summary - 2&nbsp; Text Analysis of Division of Sport Fish Staff comments to the Gotham Culture survey</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Survey_Summary.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Text_Analysis.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Text Analysis of Division of Sport Fish Staff comments to the Gotham Culture survey</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">ADF&amp;G Division of Sport Fisheries gothamCulture Survey Summary</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Survey_Summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Summary of Division of Sport Fish Staff responses to the gothamCulture survey</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Text_Analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Text Analysis of Division of Sport Fish Staff comments to the Gotham Culture survey</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">2.1</span> Introduction</a></li>
  <li><a href="#text-analysis---common-words-and-bi-grams" id="toc-text-analysis---common-words-and-bi-grams" class="nav-link" data-scroll-target="#text-analysis---common-words-and-bi-grams"><span class="header-section-number">2.2</span> Text Analysis - Common Words and Bi-grams</a></li>
  <li><a href="#text-analysis---sentiment-and-emotion-analysis" id="toc-text-analysis---sentiment-and-emotion-analysis" class="nav-link" data-scroll-target="#text-analysis---sentiment-and-emotion-analysis"><span class="header-section-number">2.3</span> Text Analysis - Sentiment and Emotion Analysis</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-text" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Text Analysis of Division of Sport Fish Staff comments to the Gotham Culture survey</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">2.1</span> Introduction</h2>
<p>Gotham Culture provided a Division of Sport Fish specific report and ~30 pages of staff comments to Division Leadership in late April. The staff comments were enlightening but also contained some possibly identifying information. This text analysis of the staff comments represents an effort to share the information contained in the comments broadly while respecting staff privacy.</p>
<p>The DLT was provided with text responses to 9 questions (a total of 836 responses). The complete question, an abbreviation for each question we used in subsequent figures, and the number of responses associated with each question are shown below.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-questions" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2.1: Gotham Culture survey questions and the number of Division of Sport Fish employee responses.</caption>
<colgroup>
<col style="width: 77%">
<col style="width: 15%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Full Question</th>
<th style="text-align: left;">Abreviated Question</th>
<th style="text-align: right;">Number of Responses</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Q21 How could ADF&amp;G enhance employee safety and wellbeing?</td>
<td style="text-align: left;">Q21: enhance safety/wellbeing</td>
<td style="text-align: right;">279</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q31 Aside from monetary compensation, how can ADF&amp;G increase your overall desire to remain with ADF&amp;G?</td>
<td style="text-align: left;">Q31: increase retention</td>
<td style="text-align: right;">152</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q35 We recognize a variety of factors impact your job satisfaction. Please select the top three (3) factors having a positive impact on your overall job satisfaction. - Other (please specify) - Text</td>
<td style="text-align: left;">Q35: positive job satisfaction factors</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q36 We recognize a variety of factors impact your job satisfaction. Please select the top three (3) factors having a negative impact on your overall job satisfaction. - Other (please specify) - Text</td>
<td style="text-align: left;">Q36: negative job satisfaction factors</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q40 13 What were your reasons for not reporting what you experienced? (select all that apply) - Other (please specify) - Text</td>
<td style="text-align: left;">Q40: reasons not to report</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q41 If you’ve seen or experienced disrespect or harassment in the workplace, how has that impacted you or your team?</td>
<td style="text-align: left;">Q41: disrespect impact</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q48 What other biases have you seen or experienced at ADF&amp;G?</td>
<td style="text-align: left;">Q48: biases oberved</td>
<td style="text-align: right;">67</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q49 If you’ve seen or experienced bias in the workplace, how has that impacted you or your team?</td>
<td style="text-align: left;">Q49: bias impact</td>
<td style="text-align: right;">61</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q54 How does your schedule, workload, or work/life integration influence your desire to work for ADF&amp;G?</td>
<td style="text-align: left;">Q54: schedule, workload, work/life</td>
<td style="text-align: right;">140</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="text-analysis---common-words-and-bi-grams" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="text-analysis---common-words-and-bi-grams"><span class="header-section-number">2.2</span> Text Analysis - Common Words and Bi-grams</h2>
<p>One way to quantify staff comments is to tally the most frequently used words within each question. We used a technique call <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">text frequency-inverse document frequency</a> to weight the importance of the words used in each question relative to the use of the same words throughout the entire document. Questions were omitted from <a href="#fig-words" class="quarto-xref">Figure&nbsp;<span>2.1</span></a> when there were no highly weighted words. The importance of adequate pay was highlighted by “monetary” being the most frequently used word in response to a question that specifically asked employees to exclude monetary considerations from their answer!</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-words" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Text_Analysis_files/figure-html/fig-words-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;2.1: Most common words found in Division of Sport Fish employee responses to each survey question.</figcaption>
</figure>
</div>
</div>
</div>
<p>A related way to quantify staff comments is to look for the most common bi-grams (2 word sequences) found in the responses to each question. Questions were omitted from <a href="#fig-wordpairs" class="quarto-xref">Figure&nbsp;<span>2.2</span></a> when there were no bi-gram repeats.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-wordpairs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Text_Analysis_files/figure-html/fig-wordpairs-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;2.2: Most common bi-grams found in Division of Sport Fish employee responses to each survey question.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="text-analysis---sentiment-and-emotion-analysis" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="text-analysis---sentiment-and-emotion-analysis"><span class="header-section-number">2.3</span> Text Analysis - Sentiment and Emotion Analysis</h2>
<p>Sentiment analysis associates words found in the staff responses with databases designed to reflect typical responses to those words. We used two databases. The <a href="http://www2.imm.dtu.dk/pubdb/edoc/imm6006.pdf">AFinn lexicon</a> associates a numeric sentiment score (-5 to 5) with ~3,400 words. In this lexicon 5 represent an extremely positive sentiment, 0 is neutral, and -5 is extremely negative sentiment. The <a href="http://www.saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm">NCR lexicon</a> associates 8 emotions with ~14,000 words and can associate more than one emotion with the same word. <a href="#tbl-lexicon" class="quarto-xref">Table&nbsp;<span>2.2</span></a> below shows examples from each lexicon based a subset of most common words identified in <a href="#fig-words" class="quarto-xref">Figure&nbsp;<span>2.1</span></a>. Note these methods fail to detect sarcasm, misspelling, negation, exc..</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-lexicon" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2.2: AFinn/NCR lexicon examples using words from tf_idf analysis.</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Word</th>
<th style="text-align: right;">AFinn Lexicon</th>
<th style="text-align: right;">NCR Lexicon</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">safety</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">training</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">enjoy</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">trust,joy,anticipation</td>
</tr>
<tr class="even">
<td style="text-align: left;">monetary</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">anticipation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">disrespect</td>
<td style="text-align: right;">-2</td>
<td style="text-align: right;">anger</td>
</tr>
<tr class="even">
<td style="text-align: left;">moral</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">trust,anger</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bias</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">anger</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>The AFinn sentiment analysis was run on each response separately and provides a sense of the sentiment associated with each response and of the distribution of sentiments across responses within each question. Based on the AFinn lexicon words used in responses to questions involving enhanced safety, increased retention, and workload had generally positive sentiment while words used in responses to questions involving bias, reporting and disrespect had generally negative sentiment.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-afinn" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Text_Analysis_files/figure-html/fig-afinn-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;2.3: AFinn lexicon results for each Division of Sport Fish employee response.</figcaption>
</figure>
</div>
</div>
</div>
<p>The NCR emotion analysis was run on all responses for each question and gives a general idea of the emotional content in the responses to each question. Based on the NCR lexicon words used in responses to questions involving enhanced safety, increased retention, and workload were more often associated with emotions of trust and anticipation while words used in responses to questions involving bias, reporting and disrespect were more often associated with emotion of anger.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in inner_join(., get_sentiments("nrc"), by = "word", multiple = "all"): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 28 of `x` matches multiple rows in `y`.
ℹ Row 7510 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-wordspairs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Text_Analysis_files/figure-html/fig-wordspairs-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;2.4: NCR lexicon results for the set of all Division of Sport Fish employee responses to each question.</figcaption>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      try { hash = new URL(url).hash; } catch {}
      const id = hash.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note !== null) {
        try {
          const html = processXRef(id, note);
          instance.setContent(html);
        } finally {
          instance.enable();
          instance.show();
        }
      } else {
        // See if we can fetch this
        fetch(url.split('#')[0])
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.getElementById(id);
          if (note !== null) {
            const html = processXRef(id, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Survey_Summary.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Summary of Division of Sport Fish Staff responses to the gothamCulture survey</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>